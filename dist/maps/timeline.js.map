{"version":3,"sources":["timeline.js"],"names":[],"mappings":"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","file":"timeline.js","sourcesContent":["(() => {\n  // 单个时间节点\n  class Timenode {\n    constructor(year, month) {\n      let d = new Date();\n      this.year = year || d.getUTCYear();\n      this.month = month || d.getMonth() + 1;\n    }\n  }\n\n  // 时间轴\n  class Timeline {\n    constructor(timenodes = [], width = 760, padding = 140) {\n      var self = this;\n      self.timenodes = timenodes;\n      self.width = width;\n      self.padding = padding;\n      self.monthRange = 0;\n      self.monthDistance = 0;\n      self.earliestMonth = 0;\n    }\n\n    addTimenode(timenode) {\n      var self = this;\n      self.timenodes = self.timenodes.concat(timenode);\n      self.timenodes.sort((a, b) => {\n        if (a.year < b.year) {\n          return true;\n        }\n        else if (a.year > b.year) {\n          return false;\n        }\n        else /* a.year === b.year */ {\n          return (a.month < b.month);\n        }\n      });\n\n      if (self.timenodes.length === 1) {\n        return 0;\n      }\n      else {\n        self.monthRange = (self.timenodes[0].year * 12 + self.timenodes[0].month)\n          - (self.timenodes[self.timenodes.length - 1].year * 12 + self.timenodes[self.timenodes.length - 1].month);\n        self.monthDistance = (self.width - self.padding) / self.monthRange;\n        self.firstMonth = self.timenodes[0].year * 12 + self.timenodes[0].month;\n        self.earliestMonth = self.timenodes[self.timenodes.length - 1].year * 12 + self.timenodes[self.timenodes.length - 1].month;\n        return 0;\n      }\n    }\n\n    applyToDOM(selector) {\n      var self = this;\n\n    }\n\n  }\n\n  window.Timenode = Timenode;\n  window.Timeline = Timeline;\n\n  // window.demoTimeline = new Timeline();\n\n  window.createTimeline = (selector, width=760, padding=140) => {\n\n    var tl = new Timeline([], width, padding);\n\n    $(selector + ' > ul').children().map(\n      (idx, dom) => {\n        let year = parseInt($(dom).attr('year'));\n        let month = parseInt($(dom).attr('month'));\n\n        var timenode = new Timenode(year, month);\n        tl.addTimenode(timenode);\n        console.log(tl);\n        return null;\n      }\n    );\n\n    $(selector + '> ul').children().map(\n      (idx, dom) => {\n        let year = parseInt($(dom).attr('year'));\n        let month = parseInt($(dom).attr('month'));\n        let offset = (tl.padding / 2 + tl.monthDistance * (tl.firstMonth - (12 * year + month) )).toString() + 'px';\n        $(dom).css('left', offset);\n        $(dom).text(year + '.' + month)\n      }\n    )\n\n\n  };\n\n})();\n\n\ncreateTimeline('#timeline-demo');"],"sourceRoot":"/source/"}